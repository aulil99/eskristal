-- phpMyAdmin SQL Dump
-- version 4.8.5
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Feb 28, 2024 at 04:52 PM
-- Server version: 10.1.38-MariaDB
-- PHP Version: 5.6.40

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
SET AUTOCOMMIT = 0;
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `eskristal`
--

-- --------------------------------------------------------

--
-- Table structure for table `ci_sessions`
--

CREATE TABLE `ci_sessions` (
  `id` varchar(128) NOT NULL,
  `ip_address` varchar(45) NOT NULL,
  `timestamp` int(10) UNSIGNED NOT NULL DEFAULT '0',
  `data` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `ci_sessions`
--

INSERT INTO `ci_sessions` (`id`, `ip_address`, `timestamp`, `data`) VALUES
('f5h01hi04hsgriul176bq7mh7cb9hq23', '::1', 1709040855, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034303833303b),
('f92366jp5ksl14sod7q2fdkcd55inpbk', '::1', 1709041114, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034313131333b),
('b9mcc9sc560hd5ao3k1nftlam8iib2sn', '::1', 1709041859, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034313831373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('nltsan4ncr1p48pl1nmac7cam4n7mbbf', '::1', 1709044337, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034343231303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('lg8cogoprakao6nm6q19gfbdmqkaj3os', '::1', 1709044541, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034343339303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('ens1qmk72rd6vqpp7pbvc43pg38lr53j', '::1', 1709045193, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034343831303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b636172745f636f6e74656e74737c613a333a7b733a31303a22636172745f746f74616c223b643a3231303030303b733a31313a22746f74616c5f6974656d73223b643a313b733a33323a223437613030616230316333313866363735326435653034303431326361386361223b613a363a7b733a323a226964223b733a363a22435452383130223b733a333a22717479223b643a313b733a353a227072696365223b643a3231303030303b733a343a226e616d65223b733a31333a2243617274726964676520383130223b733a353a22726f776964223b733a33323a223437613030616230316333313866363735326435653034303431326361386361223b733a383a22737562746f74616c223b643a3231303030303b7d7d),
('jgn3hhmv50vtpmpfrag5gt3slche40es', '::1', 1709045384, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034353331313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('uochnalv5tvhd4d7eqghp8b8e7meese1', '::1', 1709045866, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034353632383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('3ujha9r6pjb6307kaaqfmbahm0s3q8it', '::1', 1709046051, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034353934313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b636172745f636f6e74656e74737c613a333a7b733a31303a22636172745f746f74616c223b643a37303030303b733a31313a22746f74616c5f6974656d73223b643a313b733a33323a226364376533343333663739333535333037396239623663386438333461666132223b613a363a7b733a323a226964223b733a363a22464453313647223b733a333a22717479223b643a313b733a353a227072696365223b643a37303030303b733a343a226e616d65223b733a32333a22466c6173686469736b2053616e6469736b203136204742223b733a353a22726f776964223b733a33323a226364376533343333663739333535333037396239623663386438333461666132223b733a383a22737562746f74616c223b643a37303030303b7d7d),
('qj8rdeu31dsthi43qregveql1uguk6r5', '::1', 1709046484, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034363237363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('b10rdj533nv1338let43masibm1omgvt', '::1', 1709046929, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034363732363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('a1c6n5lnc59ahabu9sbm9n5i8fec9uu6', '::1', 1709047462, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034373231393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('d9go6diusef4jq402043ug442saj6oac', '::1', 1709047836, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034373630363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('c1q9dtcjralfp3ds6psdld73pqtbc7ni', '::1', 1709048270, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034373938323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('9bfbehcqtrlesognpc2trimmqk2lm4j4', '::1', 1709048566, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034383430383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('7poiheglbmksub92e51hs77bpn9f7gma', '::1', 1709048972, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034383735313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('1qr8jfjgv3ilh2dqrk34ksbsdq8c76fn', '::1', 1709049335, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034393036393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('3s2v3ntf4tcln88b285tjrau4rt1t7c5', '::1', 1709049532, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034393338333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('0e6pcjh3oigpcmqp1gc65hf6nik4eh32', '::1', 1709049990, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393034393639333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('ps9u0l7qj86c92fub79s18t3mefbav3o', '::1', 1709050394, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393035303130373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('vsk84uupc00ivruool3qc55eq75igi9n', '::1', 1709050408, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393035303430383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('ceilp0s671arpalrfcudtnrp14541rag', '::1', 1709051066, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393035303738333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('u0bb55u3ea5j1bqp80oa1gjsf68pqr8d', '::1', 1709051200, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393035313038353b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('6osenqf0ib7asfiq4e84kk117tf7uj7f', '::1', 1709085349, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038353231343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('pi2rd69012t7hieitpj59nem629ju2rh', '::1', 1709086610, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038363335323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('6eosoap49djplioqo3t7jqdffptrc8jn', '::1', 1709087280, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038373030303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b636172745f636f6e74656e74737c613a333a7b733a31303a22636172745f746f74616c223b643a3231303030303b733a31313a22746f74616c5f6974656d73223b643a313b733a33323a223437613030616230316333313866363735326435653034303431326361386361223b613a363a7b733a323a226964223b733a363a22435452383130223b733a333a22717479223b643a313b733a353a227072696365223b643a3231303030303b733a343a226e616d65223b733a31333a2243617274726964676520383130223b733a353a22726f776964223b733a33323a223437613030616230316333313866363735326435653034303431326361386361223b733a383a22737562746f74616c223b643a3231303030303b7d7d),
('h3j3a5leqjkk4bvpq390dp1hntkvhkgk', '::1', 1709087612, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038373336353b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('oe4hpfd24q8tuhblv1pbr2oln0mga2s0', '::1', 1709087959, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038373830393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('a357vfqkagrgflumnbdsq6kb9m1f9tpj', '::1', 1709088394, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393038383133313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('92md1jvn3n3nmioatcskdd95vnm0vf2t', '::1', 1709127629, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132373436373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('igijjv1tqdr3vetvrpa8l4l6fqphat2u', '::1', 1709127775, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132373635393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('1d8hpn97mc19jver1drjdhm3ngbj2lqo', '::1', 1709128398, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132383137383b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('h9450lah0iadqfh2707p05g51bqq8lc8', '::1', 1709128732, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132383532333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('ltpsr03sea88o7mna3lcasql15mdnsva', '::1', 1709128839, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132383833353b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('0v00gas5pm09ul9jj8ob44g07bj3mi2n', '::1', 1709129676, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393132393636353b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('q3br5dev3mtv11gsd4nh81gqqnmr9ubr', '::1', 1709130943, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133303638333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('51v68f9t0f3dg89nlthnvod4cnrh4kru', '::1', 1709131241, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133303939303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('b694p9arf33ml8hdng5uuj4iojnmnjob', '::1', 1709131600, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133313239393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('pth96ka6iaf6ttrmrouo449nsp76i9rg', '::1', 1709131960, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133313636313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('qbec3esv1atcijdkunvn5dm9ji8v5n4f', '::1', 1709132350, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133323037343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('927i7d942rfdpaitd4u5ip2vaqef2e76', '::1', 1709132534, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133323430393b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('7sjbq7vo98oh8h0gr1cjp486oe5vtqdk', '::1', 1709132767, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133323736373b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('hopmko9emolvnad1uklrfaphc0uktlhr', '::1', 1709133132, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133323837333b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('odd6dbe1qghrclr9a4inqago2j2dil33', '::1', 1709133439, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133333231323b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('jfg7e06jugnt8vuifndcfa9vhifir93v', '::1', 1709133838, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133333537313b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('162qck2gj7nfucbvgdjq5lgc5tjcohhs', '::1', 1709134181, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133333930363b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('49cj2tu3eftmouonu88en94j2d8ajmrp', '::1', 1709134339, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133343235343b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b),
('51443mai8taiemhfn7fthnh22799s3mb', '::1', 1709135350, 0x5f5f63695f6c6173745f726567656e65726174657c693a313730393133353036303b5573657249447c733a313a2231223b557365727c733a31333a2241646d696e6973747261746f72223b6c6576656c7c733a353a2261646d696e223b666f746f7c733a31383a22666f746f313539363031373834372e706e67223b);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_barang`
--

CREATE TABLE `tbl_barang` (
  `kode_barang` varchar(6) NOT NULL,
  `nama_barang` varchar(255) NOT NULL,
  `brand` varchar(255) NOT NULL,
  `stok` int(11) NOT NULL DEFAULT '0',
  `harga` double NOT NULL,
  `active` enum('Y','N') NOT NULL DEFAULT 'Y'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_barang`
--

INSERT INTO `tbl_barang` (`kode_barang`, `nama_barang`, `brand`, `stok`, `harga`, `active`) VALUES
('ESBLK', 'Es Balok', 'Es kristal mantap', 95, 50000, 'Y'),
('ESKRS', 'Es Kristal', 'Es kristal mantap', 90, 20000, 'Y');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_detail_pembelian`
--

CREATE TABLE `tbl_detail_pembelian` (
  `id_pembelian` varchar(20) NOT NULL,
  `id_barang` varchar(6) NOT NULL,
  `qty` smallint(6) NOT NULL,
  `harga` double NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_detail_pembelian`
--

INSERT INTO `tbl_detail_pembelian` (`id_pembelian`, `id_barang`, `qty`, `harga`) VALUES
('ID1595997781', 'ADVSPK', 2, 35000),
('ID1595997781', 'CTR810', 1, 190000),
('ID1596005126', 'CTR811', 1, 245000);

--
-- Triggers `tbl_detail_pembelian`
--
DELIMITER $$
CREATE TRIGGER `pembelian_barang` AFTER INSERT ON `tbl_detail_pembelian` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok + new.qty
    WHERE b.kode_barang = new.id_barang;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `update_pembelian` AFTER DELETE ON `tbl_detail_pembelian` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok - old.qty
    WHERE b.kode_barang = old.id_barang;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_detail_penjualan`
--

CREATE TABLE `tbl_detail_penjualan` (
  `id_penjualan` varchar(20) NOT NULL,
  `id_barang` varchar(6) NOT NULL,
  `qty` smallint(6) NOT NULL,
  `harga` double NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_detail_penjualan`
--

INSERT INTO `tbl_detail_penjualan` (`id_penjualan`, `id_barang`, `qty`, `harga`) VALUES
('ID1709135214', 'ESBLK', 5, 50000),
('ID1709135214', 'ESKRS', 10, 20000);

--
-- Triggers `tbl_detail_penjualan`
--
DELIMITER $$
CREATE TRIGGER `penjualan_barang` AFTER INSERT ON `tbl_detail_penjualan` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok - new.qty
    WHERE b.kode_barang = new.id_barang;
END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `update_penjualan` AFTER DELETE ON `tbl_detail_penjualan` FOR EACH ROW BEGIN
	UPDATE tbl_barang b SET b.stok = b.stok + old.qty
    WHERE b.kode_barang = old.id_barang;
END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `tbl_pembelian`
--

CREATE TABLE `tbl_pembelian` (
  `id_pembelian` varchar(20) NOT NULL,
  `tgl_pembelian` date NOT NULL,
  `id_supplier` varchar(15) NOT NULL,
  `id_user` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_pembelian`
--

INSERT INTO `tbl_pembelian` (`id_pembelian`, `tgl_pembelian`, `id_supplier`, `id_user`) VALUES
('ID1595997781', '2020-07-29', 'ID1595998788', 1),
('ID1596005126', '2020-07-28', 'ID1595997179', 1);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_pengiriman`
--

CREATE TABLE `tbl_pengiriman` (
  `id` int(11) NOT NULL,
  `id_pengiriman` varchar(255) NOT NULL,
  `id_penjualan` varchar(255) NOT NULL,
  `date` date NOT NULL,
  `customer` varchar(255) NOT NULL,
  `phone` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `kurir` varchar(255) NOT NULL,
  `no_kendaraan` varchar(255) NOT NULL,
  `no_po` varchar(255) DEFAULT NULL,
  `penerima` varchar(255) DEFAULT NULL,
  `keterangan` varchar(255) DEFAULT NULL,
  `status` varchar(255) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `tbl_pengiriman`
--

INSERT INTO `tbl_pengiriman` (`id`, `id_pengiriman`, `id_penjualan`, `date`, `customer`, `phone`, `alamat`, `kurir`, `no_kendaraan`, `no_po`, `penerima`, `keterangan`, `status`) VALUES
(1, 'ID1709135264', 'ID1709135214', '2024-02-28', 'Ulel', '082277338899', 'Jl. Pasar 3, Medan timur', 'Ahmad', 'BK 1234 ABC', NULL, 'Teman kos', 'Di terima oleh yg bersangkutan', 'berhasil');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_penjualan`
--

CREATE TABLE `tbl_penjualan` (
  `id_penjualan` varchar(20) NOT NULL,
  `nama_pembeli` varchar(30) NOT NULL,
  `tgl_penjualan` date NOT NULL,
  `id_user` int(11) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_penjualan`
--

INSERT INTO `tbl_penjualan` (`id_penjualan`, `nama_pembeli`, `tgl_penjualan`, `id_user`) VALUES
('ID1709135214', 'Ulel', '2024-02-28', 1);

-- --------------------------------------------------------

--
-- Table structure for table `tbl_supplier`
--

CREATE TABLE `tbl_supplier` (
  `id_supplier` varchar(15) NOT NULL,
  `nama_supplier` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `telp` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_supplier`
--

INSERT INTO `tbl_supplier` (`id_supplier`, `nama_supplier`, `alamat`, `telp`) VALUES
('ID1595997179', 'Aipel Computer', 'Ds. Manyar, Sidoarjo', '085731109556'),
('ID1595998788', 'Sarana Informasi Computer', 'Jl. Imam Bonjol No. 16 Nganjuk', '08392193833');

-- --------------------------------------------------------

--
-- Table structure for table `tbl_user`
--

CREATE TABLE `tbl_user` (
  `id_user` int(11) NOT NULL,
  `username` varchar(30) NOT NULL,
  `fullname` varchar(50) NOT NULL,
  `password` varchar(255) NOT NULL,
  `alamat` varchar(255) NOT NULL,
  `hp` varchar(20) NOT NULL,
  `foto` varchar(50) NOT NULL DEFAULT 'default.jpg',
  `level` enum('admin','pegawai') NOT NULL,
  `active` enum('Y','N') NOT NULL DEFAULT 'Y',
  `last_login` datetime DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

--
-- Dumping data for table `tbl_user`
--

INSERT INTO `tbl_user` (`id_user`, `username`, `fullname`, `password`, `alamat`, `hp`, `foto`, `level`, `active`, `last_login`) VALUES
(1, 'admin', 'Administrator', '$2y$08$BO41OJFfhPPPzjKdWw2I6OyUElK1mkD43UVt1ss6J1xrVUExC1lRy', '', '', 'foto1596017847.png', 'admin', 'Y', '2020-07-30 07:59:43'),
(2, 'pegawai', 'Pegawai', '$2y$10$bZkYvXB4K93BWcR05e92r.Vcyq1PrnGFtzougX0LdN5bLaGY/1gPa', 'Jl. Semeru No.90', '085731109355', 'foto1596071469.png', 'pegawai', 'Y', '2020-07-18 15:18:43'),
(6, 'user2', 'Pegawai Kedua', '$2y$10$swIMV3E0b6nRrDXnyBgjO.tN7vMLNmYf6Zm76CG.TO7WH9sZU5LTm', 'Jl. Nanas No. 24, Pace - Nganjuk', '085731109355', 'foto1595054714.png', 'pegawai', 'Y', '2020-07-22 07:59:43');

--
-- Indexes for dumped tables
--

--
-- Indexes for table `ci_sessions`
--
ALTER TABLE `ci_sessions`
  ADD KEY `ci_sessions_timestamp` (`timestamp`);

--
-- Indexes for table `tbl_barang`
--
ALTER TABLE `tbl_barang`
  ADD PRIMARY KEY (`kode_barang`);

--
-- Indexes for table `tbl_pembelian`
--
ALTER TABLE `tbl_pembelian`
  ADD PRIMARY KEY (`id_pembelian`);

--
-- Indexes for table `tbl_pengiriman`
--
ALTER TABLE `tbl_pengiriman`
  ADD PRIMARY KEY (`id`),
  ADD UNIQUE KEY `id_pengiriman` (`id_pengiriman`);

--
-- Indexes for table `tbl_penjualan`
--
ALTER TABLE `tbl_penjualan`
  ADD PRIMARY KEY (`id_penjualan`);

--
-- Indexes for table `tbl_supplier`
--
ALTER TABLE `tbl_supplier`
  ADD PRIMARY KEY (`id_supplier`);

--
-- Indexes for table `tbl_user`
--
ALTER TABLE `tbl_user`
  ADD PRIMARY KEY (`id_user`),
  ADD UNIQUE KEY `username` (`username`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `tbl_pengiriman`
--
ALTER TABLE `tbl_pengiriman`
  MODIFY `id` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=2;

--
-- AUTO_INCREMENT for table `tbl_user`
--
ALTER TABLE `tbl_user`
  MODIFY `id_user` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=7;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
